<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_15) on Sun Mar 11 22:42:48 EDT 2012 -->
<TITLE>
ServerTransaction (The JAIN-SIP-1.2 RI For the People !)
</TITLE>

<META NAME="keywords" CONTENT="javax.sip.ServerTransaction interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="ServerTransaction (The JAIN-SIP-1.2 RI For the People !)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ServerTransaction.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

                
                    <b> NIST-SIP: The Reference Implementation for JAIN-SIP 1.2 </b>
                
            </EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../javax/sip/ResponseEvent.html" title="class in javax.sip"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../javax/sip/SipException.html" title="class in javax.sip"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?javax/sip/ServerTransaction.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ServerTransaction.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.sip</FONT>
<BR>
Interface ServerTransaction</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="http://java.sun.com/j2se/1.5/docs/api/java/io/Serializable.html" title="class or interface in java.io">Serializable</A>, <A HREF="../../javax/sip/Transaction.html" title="interface in javax.sip">Transaction</A></DD>
</DL>
<DL>
<DT><B>All Known Subinterfaces:</B> <DD><A HREF="../../gov/nist/javax/sip/ServerTransactionExt.html" title="interface in gov.nist.javax.sip">ServerTransactionExt</A></DD>
</DL>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../gov/nist/javax/sip/stack/SIPServerTransaction.html" title="class in gov.nist.javax.sip.stack">SIPServerTransaction</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>ServerTransaction</B><DT>extends <A HREF="../../javax/sip/Transaction.html" title="interface in javax.sip">Transaction</A></DL>
</PRE>

<P>
A server transaction is used by a SipProvider to handle incoming Request
 messages to fire Request events to the SipListener on a specific server
 transaction and by a User Agent Server application to send Response
 messages to a User Agent Client application. This interfaces enables an
 application to send a <A HREF="../../javax/sip/message/Response.html" title="interface in javax.sip.message"><CODE>Response</CODE></A> to a recently
 received Request in a transaction stateful way.
 <p>
 A new server transaction is generated in the following ways:
 <ul>
 <li> By the application by invoking the
 <A HREF="../../javax/sip/SipProvider.html#getNewServerTransaction(javax.sip.message.Request)"><CODE>SipProvider.getNewServerTransaction(Request)</CODE></A> for Requests that the
 application wishes to handle.
 <li> By the SipProvider by automatically populating the server transaction
 of a RequestEvent for Incoming Requests that match an existing Dialog. Note
 that a dialog-stateful application is automatically transaction
 stateful too
 </ul>
 A server transaction of the transaction layer is represented by a finite
 state machine that is constructed to process a particular request under
 the covers of a stateful SipProvider. The transaction layer handles
 application-layer retransmissions, matching of responses to requests, and
 application-layer timeouts.
 <p>
 The server transaction Id must be unique within the underlying
 implementation. This Id is commonly taken from the branch parameter in the
 topmost Via header (for RFC3261 compliant clients), but may also be computed as a
 cryptographic hash of the To tag, From tag, Call-ID header field, the
 Request-URI of the request received (before translation), the topmost Via
 header, and the sequence number from the CSeq header field, in addition to
 any Proxy-Require and Proxy-Authorization header fields that may be present.
 The algorithm used to determine the id is implementation-dependent.
 <p>
 For the detailed server transaction state machines refer to Chapter
 17 of <a href="http://www.ietf.org/rfc/rfc3261.txt">RFC 3261</a>, the
 allowable transitions are summarized below:
 <p>
 <b>Invite Transaction:</b><br>
 Proceeding --> Completed --> Confirmed --> Terminated
 <p>
 <b>Non-Invite Transaction:</b><br>
 Trying --> Proceeding --> Completed --> Terminated
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.2</DD>
<DT><B>Author:</B></DT>
  <DD>BEA Systems, NIST</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../javax/sip/ServerTransaction.html#enableRetransmissionAlerts()">enableRetransmissionAlerts</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enable the timeout retransmit notifications for the ServerTransaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../javax/sip/ServerTransaction.html#sendResponse(javax.sip.message.Response)">sendResponse</A></B>(<A HREF="../../javax/sip/message/Response.html" title="interface in javax.sip.message">Response</A>&nbsp;response)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends the Response to a Request which is associated with this
 ServerTransaction.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.sip.Transaction"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface javax.sip.<A HREF="../../javax/sip/Transaction.html" title="interface in javax.sip">Transaction</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../javax/sip/Transaction.html#getApplicationData()">getApplicationData</A>, <A HREF="../../javax/sip/Transaction.html#getBranchId()">getBranchId</A>, <A HREF="../../javax/sip/Transaction.html#getDialog()">getDialog</A>, <A HREF="../../javax/sip/Transaction.html#getRequest()">getRequest</A>, <A HREF="../../javax/sip/Transaction.html#getRetransmitTimer()">getRetransmitTimer</A>, <A HREF="../../javax/sip/Transaction.html#getState()">getState</A>, <A HREF="../../javax/sip/Transaction.html#setApplicationData(java.lang.Object)">setApplicationData</A>, <A HREF="../../javax/sip/Transaction.html#setRetransmitTimer(int)">setRetransmitTimer</A>, <A HREF="../../javax/sip/Transaction.html#terminate()">terminate</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="sendResponse(javax.sip.message.Response)"><!-- --></A><H3>
sendResponse</H3>
<PRE>
void <B>sendResponse</B>(<A HREF="../../javax/sip/message/Response.html" title="interface in javax.sip.message">Response</A>&nbsp;response)
                  throws <A HREF="../../javax/sip/SipException.html" title="class in javax.sip">SipException</A>,
                         <A HREF="../../javax/sip/InvalidArgumentException.html" title="class in javax.sip">InvalidArgumentException</A></PRE>
<DL>
<DD>Sends the Response to a Request which is associated with this
 ServerTransaction. When an application wishes to send a Response, it
 creates a Response using the <A HREF="../../javax/sip/message/MessageFactory.html" title="interface in javax.sip.message"><CODE>MessageFactory</CODE></A> and
 then passes that Response to this method. The Response message gets sent out on
 the network via the ListeningPoint information that is associated with
 the SipProvider of this ServerTransaction.
 <p>
 This method implies that the application is functioning as either a UAS
 or a stateful proxy, hence the underlying implementation acts statefully.
 When a UAS sends a 2xx response to an INVITE, the server transaction is
 transitions to the TerminatedState. The implementation may delay physically
 removing ServerTransaction record from memory to catch retransmissions
 of the INVITE in accordance with the reccomendation of
 <a href="http://bugs.sipit.net/show_bug.cgi?id=769"> http://bugs.sipit.net/show_bug.cgi?id=769 </a>.


 <p><b>ACK Processing and final response retransmission:</b> <br/>
 If a Dialog is associated
 with the ServerTransaction then when the UAC sends the ACK ( the typical case for User Agents),
 the Application ( i.e. Listener )
 will see a ServerTransaction corresponding to the ACK and the corresponding
 <A HREF="../../javax/sip/Dialog.html" title="interface in javax.sip"><CODE>Dialog</CODE></A> presented to it. The ACK will  be presented to the Listener only
 once in this case. Retransmissions of the OK and filtering of ACK retransmission
 are the responsibility of the Dialog layer of this specification. However
 if no <A HREF="../../javax/sip/Dialog.html" title="interface in javax.sip"><CODE>Dialog</CODE></A> is associated with the INVITE Transaction, the ACK will be presented
 to the Application with a null Dialog in the <A HREF="../../javax/sip/RequestEvent.html" title="class in javax.sip"><CODE>RequestEvent</CODE></A> and there will be
 no Dialog associated with the ACK Transaction
 (i.e. <A HREF="../../javax/sip/Transaction.html#getDialog()"><CODE>Transaction.getDialog()</CODE></A> returns null).
 In this case (when there is no Dialog associated with the original INVITE or ACK)
 the Application is responsible for retransmission
 of the OK for the INVITE if necessary (i.e. if it wants to manage its own dialog layer and
 function as a User Agent) and for dealing with retransmissions of the ACK. This
 requires that the three way handshake of an INVITE is managed by the UAS
 application and not the implementation of this specification.

 <p>
 Note that Responses created via <A HREF="../../javax/sip/Dialog.html#createReliableProvisionalResponse(int)"><CODE>Dialog.createReliableProvisionalResponse(int)</CODE></A>
 should be sent using <A HREF="../../javax/sip/Dialog.html#sendReliableProvisionalResponse(javax.sip.message.Response)"><CODE>Dialog.sendReliableProvisionalResponse(Response)</CODE></A>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>response</CODE> - the Response to send to the Request.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../javax/sip/SipException.html" title="class in javax.sip">SipException</A></CODE> - if the SipProvider cannot send the Response for any
 other reason.
<DD><CODE><A HREF="../../javax/sip/InvalidArgumentException.html" title="class in javax.sip">InvalidArgumentException</A></CODE> - if the Response is created by
  <A HREF="../../javax/sip/Dialog.html#createReliableProvisionalResponse(int)"><CODE>Dialog.createReliableProvisionalResponse(int)</CODE></A> and
  the application attempts to use this method to send the response.<DT><B>See Also:</B><DD><A HREF="../../javax/sip/message/Response.html" title="interface in javax.sip.message"><CODE>Response</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="enableRetransmissionAlerts()"><!-- --></A><H3>
enableRetransmissionAlerts</H3>
<PRE>
void <B>enableRetransmissionAlerts</B>()
                                throws <A HREF="../../javax/sip/SipException.html" title="class in javax.sip">SipException</A></PRE>
<DL>
<DD>Enable the timeout retransmit notifications for the ServerTransaction. This method is
 invoked by UAs that do want to be alerted by the
 stack to retransmit 2XX responses but that do NOT want to associate a Dialog.
 The Default operation is to disable retransmission alerts for the Server Transaction
 when no Dialog is associated with the Server Transaction, as is common
 for a Proxy server.
 When this method is called, the stack will continue to generate <A HREF="../../javax/sip/Timeout.html#RETRANSMIT"><CODE>Timeout.RETRANSMIT</CODE></A>
 until the application calls <A HREF="../../javax/sip/Transaction.html#terminate()"><CODE>Transaction.terminate()</CODE></A> or a
 the listener receives a <A HREF="../../javax/sip/SipListener.html#processTransactionTerminated(javax.sip.TransactionTerminatedEvent)"><CODE>SipListener.processTransactionTerminated(TransactionTerminatedEvent)</CODE></A> callback.
  Note that the stack calls
 <A HREF="../../javax/sip/SipListener.html#processTransactionTerminated(javax.sip.TransactionTerminatedEvent)"><CODE>SipListener.processTransactionTerminated(TransactionTerminatedEvent)</CODE></A>asynchronously
 after it removes the transaction some time after the Transaction state is set to
 <A HREF="../../javax/sip/TransactionState.html#TERMINATED"><CODE>TransactionState.TERMINATED</CODE></A> ;
 after which, it maintains no record of the Transaction.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../javax/sip/SipException.html" title="class in javax.sip">SipException</A></CODE> - if a Dialog is already associated with the ServerTransaction
 when the method is called.<DT><B>Since:</B></DT>
  <DD>1.2</DD>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ServerTransaction.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

                
                    <b> NIST-SIP: The Reference Implementation for JAIN-SIP 1.2 </b>
                
            </EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../javax/sip/ResponseEvent.html" title="class in javax.sip"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../javax/sip/SipException.html" title="class in javax.sip"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?javax/sip/ServerTransaction.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ServerTransaction.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

            
                    <font size="-1">
            <a href="http://www-x.antd.nist.gov/"> A product of the NIST/ITL Advanced Networking Technologies Division. </a>
            <br>
                <a href="../uncopyright.html"> See conditions of use. </a>
                <br>
                    <a href="mailto:users@jain-sip.dev.java.net">Submit a bug report or feature request. </a>
                    <br>
                    </font>
                
            
</BODY>
</HTML>
